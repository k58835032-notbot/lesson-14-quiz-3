<!DOCTYPE html>

<html lang="ja">

<head>

<meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<title>Kana Audio Quiz with GIFs</title>

<style>

body {

  font-family:"Hiragino Kaku Gothic Pro","Meiryo",sans-serif;

  display:flex;

  flex-direction:column;

  align-items:center;

  padding:40px;

  color:#333;

  text-align:center;

}

h1 {color:#b23b3b;font-size:2em;margin-bottom:20px;}

button {font-size:18px;padding:12px 24px;margin:10px;border-radius:12px;cursor:pointer;transition:.3s;}

#playSound {background:white;color:#b23b3b;border:3px solid #b23b3b;}

#playSound:hover {background:#ffe6f2;}

.choice {background:#b23b3b;color:white;border:2px solid #b23b3b;}

.choice:hover {background:#ff4da6;}
  
#timer {

  font-weight: bold;

  font-size: 20px;

}



#result {font-size:20px;margin-top:20px;font-weight:bold;}

#gif {margin-top:20px;max-width:250px;border-radius:12px;}

</style>

</head>

<body>

<h1>üéß Kana Listening Quiz</h1>

<button id="playSound">‚ñ∂Ô∏è Play Sound</button>
  
<div id="timer" style="font-size:18px;margin-top:10px;color:#b23b3b;"></div>

<div id="choices"></div>

<div id="result">Click "‚ñ∂Ô∏è Play Sound" to start the quiz üéß</div>

<img id="gif" src="" alt="" />
  
  <script>

const kanaToRomaji = {

  // Basic

  „ÅÇ:"a", „ÅÑ:"i", „ÅÜ:"u", „Åà:"e", „Åä:"o",

  „Åã:"ka", „Åç:"ki", „Åè:"ku", „Åë:"ke", „Åì:"ko",

  „Åï:"sa", „Åó:"shi", „Åô:"su", „Åõ:"se", „Åù:"so",

  „Åü:"ta", „Å°:"chi", „Å§:"tsu", „Å¶:"te", „Å®:"to",

  „Å™:"na", „Å´:"ni", „Å¨:"nu", „Å≠:"ne", „ÅÆ:"no",

  „ÅØ:"ha", „Å≤:"hi", „Åµ:"fu", „Å∏:"he", „Åª:"ho",

  „Åæ:"ma", „Åø:"mi", „ÇÄ:"mu", „ÇÅ:"me", „ÇÇ:"mo",

  „ÇÑ:"ya", „ÇÜ:"yu", „Çà:"yo",

  „Çâ:"ra", „Çä:"ri", „Çã:"ru", „Çå:"re", „Çç:"ro",

  „Çè:"wa", „Çí:"wo", „Çì:"n",

  // Dakuten

  „Åå:"ga", „Åé:"gi", „Åê:"gu", „Åí:"ge", „Åî:"go",

  „Åñ:"za", „Åò:"ji", „Åö:"zu", „Åú:"ze", „Åû:"zo",

  „Å†:"da", „Å¢:"ji", „Å•:"zu", „Åß:"de", „Å©:"do",

  „Å∞:"ba", „Å≥:"bi", „Å∂:"bu", „Åπ:"be", „Åº:"bo",

  „Å±:"pa", „Å¥:"pi", „Å∑:"pu", „Å∫:"pe", „ÅΩ:"po",

  // Y≈çon

  „Åç„ÇÉ:"kya", „Åç„ÇÖ:"kyu", „Åç„Çá:"kyo",

  „Åó„ÇÉ:"sha", „Åó„ÇÖ:"shu", „Åó„Çá:"sho",

  „Å°„ÇÉ:"cha", „Å°„ÇÖ:"chu", „Å°„Çá:"cho",

  „Å´„ÇÉ:"nya", „Å´„ÇÖ:"nyu", „Å´„Çá:"nyo",

  „Å≤„ÇÉ:"hya", „Å≤„ÇÖ:"hyu", „Å≤„Çá:"hyo",

  „Åø„ÇÉ:"mya", „Åø„ÇÖ:"myu", „Åø„Çá:"myo",

  „Çä„ÇÉ:"rya", „Çä„ÇÖ:"ryu", „Çä„Çá:"ryo",

  // Y≈çon (voiced)

  „Åé„ÇÉ:"gya", „Åé„ÇÖ:"gyu", „Åé„Çá:"gyo",

  „Åò„ÇÉ:"ja", „Åò„ÇÖ:"ju", „Åò„Çá:"jo",

  „Å≥„ÇÉ:"bya", „Å≥„ÇÖ:"byu", „Å≥„Çá:"byo",

  „Å¥„ÇÉ:"pya", „Å¥„ÇÖ:"pyu", „Å¥„Çá:"pyo"

};

const audio = new Audio();

const baseURL = "https://raw.githubusercontent.com/Kuuuube/kana-quiz-sounds/master/audio/0/";

const sounds = [

  // Basic

  "„ÅÇ","„ÅÑ","„ÅÜ","„Åà","„Åä",

  "„Åã","„Åç","„Åè","„Åë","„Åì",

  "„Åï","„Åó","„Åô","„Åõ","„Åù",

  "„Åü","„Å°","„Å§","„Å¶","„Å®",

  "„Å™","„Å´","„Å¨","„Å≠","„ÅÆ",

  "„ÅØ","„Å≤","„Åµ","„Å∏","„Åª",

  "„Åæ","„Åø","„ÇÄ","„ÇÅ","„ÇÇ",

  "„ÇÑ","„ÇÜ","„Çà",

  "„Çâ","„Çä","„Çã","„Çå","„Çç",

  "„Çè","„Çí","„Çì",

  // Dakuten / Handakuten

  "„Åå","„Åé","„Åê","„Åí","„Åî",

  "„Åñ","„Åò","„Åö","„Åú","„Åû",

  "„Å†","„Å¢","„Å•","„Åß","„Å©",

  "„Å∞","„Å≥","„Å∂","„Åπ","„Åº",

  "„Å±","„Å¥","„Å∑","„Å∫","„ÅΩ",

  // Y≈çon

  "„Åç„ÇÉ","„Åç„ÇÖ","„Åç„Çá",

  "„Åó„ÇÉ","„Åó„ÇÖ","„Åó„Çá",

  "„Å°„ÇÉ","„Å°„ÇÖ","„Å°„Çá",

  "„Å´„ÇÉ","„Å´„ÇÖ","„Å´„Çá",

  "„Å≤„ÇÉ","„Å≤„ÇÖ","„Å≤„Çá",

  "„Åø„ÇÉ","„Åø„ÇÖ","„Åø„Çá",

  "„Çä„ÇÉ","„Çä„ÇÖ","„Çä„Çá",

  // Y≈çon with dakuten / handakuten

  "„Åé„ÇÉ","„Åé„ÇÖ","„Åé„Çá",

  "„Åò„ÇÉ","„Åò„ÇÖ","„Åò„Çá",

  "„Å≥„ÇÉ","„Å≥„ÇÖ","„Å≥„Çá",

  "„Å¥„ÇÉ","„Å¥„ÇÖ","„Å¥„Çá"

];

let currentKana = "";

let questionCount = 0;

let score = 0;

let timeLeft = 5;

let timerInterval = null;
    
let gameStarted = false;


const maxQuestions = 25; // shorter for demonstration

function newQuestion() {

  if(questionCount >= maxQuestions) return endQuiz();

  questionCount++;

  currentKana = sounds[Math.floor(Math.random() * sounds.length)];

  const choicesDiv = document.getElementById('choices');

  choicesDiv.innerHTML = '';

  const options = new Set([currentKana]);

  while(options.size < 4) options.add(sounds[Math.floor(Math.random() * sounds.length)]);

  [...options].sort(()=>0.5-Math.random()).forEach(kana=>{

    const btn = document.createElement('button');

    btn.className='choice';

    btn.textContent=kana;

    btn.onclick = ()=>checkAnswer(kana);

    choicesDiv.appendChild(btn);

  });

  document.getElementById('result').textContent =

  `Q ${questionCount} / ${maxQuestions} ‚Äî You have 5 seconds!`;

startTimer();

}

function playCurrentSound() {

  const romaji = kanaToRomaji[currentKana];

  if (!romaji) {

    alert("No audio mapping for " + currentKana);

    return;

  }

  audio.src = `${baseURL}${romaji}.mp3`;

  audio.currentTime = 0;

  audio.play();

}

function startTimer() {

  clearInterval(timerInterval);

  timeLeft = 5;

  updateTimer();

  timerInterval = setInterval(() => {

    timeLeft--;

    updateTimer();

    if (timeLeft <= 0) {

      clearInterval(timerInterval);

      timeUp();

    }

  }, 1000);

}

function updateTimer() {

  document.getElementById("timer").textContent =

    `‚è± Time left: ${timeLeft}s`;

}

function timeUp() {

  document.getElementById("result").textContent =

    `‚è∞ Time‚Äôs up! Correct answer: ${currentKana}`;

  setTimeout(newQuestion, 1200);

}

function checkAnswer(answer){

clearInterval(timerInterval);

  const result = document.getElementById('result');

  if(answer===currentKana){

    score++;

    const messages = [

      "Great job! üåü","Awesome! ‚úÖ","You're doing amazing! üí™",

      "Perfect! üéØ","Keep it up! üöÄ"

    ];

    result.textContent = `‚≠ï ${messages[Math.floor(Math.random()*messages.length)]} (${questionCount}/${maxQuestions})`;

  } else {

    result.textContent = `‚ùå Wrong! Correct: ${currentKana} ‚Äî Don't worry, try the next one! (${questionCount}/${maxQuestions})`;

  }

  setTimeout(newQuestion, 1200);

}

function endQuiz(){

  document.getElementById('choices').innerHTML='';

  const mEl = document.getElementById('result');

  const gifEl = document.getElementById('gif');

  let text="", gif="";

  if(score>=21){

    text="üåü Perfect Score! You're a kana master! üåü";

    gif="https://raw.githubusercontent.com/k58835032-notbot/lesson-9-morae/main/cool%20cute%20cat.gif";

  } else if(score>=12){

    text="üëç Excellent work! Keep practicing and you'll be unstoppable!";

    gif="https://raw.githubusercontent.com/k58835032-notbot/lesson-9-morae/main/cute%20cat%20walking.gif";

  } else {

    text="üå± Don‚Äôt worry ‚Äî practice makes perfect!";

    gif="https://raw.githubusercontent.com/k58835032-notbot/lesson-9-morae/main/sad%20cute%20cat.gif";

  }

mEl.textContent = `${text} Score: ${score} / ${maxQuestions}`;

  gifEl.src = gif;

  document.getElementById('playSound').disabled = true;

}

document.getElementById('playSound').addEventListener('click', () => {
  if (!gameStarted) {
    gameStarted = true;
    newQuestion();       // start the game
    setTimeout(playCurrentSound, 100); // play first sound after setup
  } else {
    playCurrentSound();  // normal replay
  }
});



</script>

</body>

</html>
